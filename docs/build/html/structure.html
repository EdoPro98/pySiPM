

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Files Structure &mdash; pySiPM 0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Setup" href="setup.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> pySiPM
          

          
            
            <img src="_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Files Structure</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#main">Main</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#main-py">main.py</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#variables">Variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#variables-py">variables.py</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#functions">Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#libs-lib-py">libs/lib.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="#libs-libcpu-py">libs/libCPU.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="#libs-libgpu-py">libs/libGPU.py</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#other">Other</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#scr">scr</a></li>
<li class="toctree-l3"><a class="reference internal" href="#files">files</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="variables.html">Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="theory.html">Theory</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pySiPM</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Files Structure</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/structure.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="files-structure">
<h1>Files Structure<a class="headerlink" href="#files-structure" title="Permalink to this headline">¶</a></h1>
<p>In this section the file structure used to build the simulation is explained. You can find a brief description of the files used and they content. For a detailed explanation see the individual sections.</p>
<div class="section" id="main">
<h2>Main<a class="headerlink" href="#main" title="Permalink to this headline">¶</a></h2>
<p>The simulation is made of a series of function and variables that are used in the main file to generate a SiPM event. In the main file the number of cells triggered is calculated and the signal is generated accordingly. In this file the signal is also analysed.</p>
<p>The structure of the main file may be modified by the user to include more advanced analysis of the digitised.  signal.</p>
<div class="section" id="main-py">
<h3>main.py<a class="headerlink" href="#main-py" title="Permalink to this headline">¶</a></h3>
<p>In this file the functions present in the <cite>libs</cite> folder are combined to generate a complete SiPM event</p>
<dl class="py function">
<dt id="main.SiPM">
<code class="sig-prename descclassname">main.</code><code class="sig-name descname">SiPM</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">times</span></em>, <em class="sig-param"><span class="n">other</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/main.html#SiPM"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#main.SiPM" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that calls all the procedures defined in libs to generate a complete SiPM event.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>times</strong> (<em>np.ndarray</em>) – This array contains the arriving time of each photon on the SiPM sensor surface. This array is the input of the simulation.</p></li>
<li><p><strong>other</strong> (<em>tuple</em>) – This variable may contain other informations about the event generated. It can be the event id, the arriving time inserted in the simulation or the real number of photons inserted in the simulation. This tuple will be copied as it is in the output.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>integral</strong> (<em>double</em>) – The integral of the signal calculated in the integration gate</p></li>
<li><p><strong>peak</strong> (<em>double</em>) – The height of the signal in the integration gate</p></li>
<li><p><strong>tstart</strong> (<em>double</em>) – The time of arrival of the signal in ns defined as the first sample over the threshld of 1.5</p></li>
<li><p><strong>other</strong> (<em>tuple</em>) – The copy of the <cite>other</cite> variable given in the input</p></li>
<li><p><strong>signal</strong> (<em>np.ndarray(float32)</em>) – If the options -W is enabled the complete SiPM signal will be passed in the output. Otherwise this output is None</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="variables">
<h2>Variables<a class="headerlink" href="#variables" title="Permalink to this headline">¶</a></h2>
<div class="section" id="variables-py">
<h3>variables.py<a class="headerlink" href="#variables-py" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">The file <cite>variables.py</cite> contains all the variables needed to describe the SiPM sensor, the simulation behavior and the signal analysis.</div>
<div class="line">Here is a brief description of all the parameters with their default value.</div>
</div>
<ul class="simple">
<li><p>SiPM Settings:</p>
<ul>
<li><p><code class="code docutils literal notranslate"><span class="pre">size</span> <span class="pre">=</span> <span class="pre">1</span></code> Size of the SiPM sensitive area in mm (side)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">cellsize</span> <span class="pre">=</span> <span class="pre">25</span></code> Pitch of a single sensitive cell in um</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">dcr</span> <span class="pre">=</span> <span class="pre">200e3</span></code> Dark count rate in kHz</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">xt</span> <span class="pre">=</span> <span class="pre">0.03</span></code> Optical crosstalk probability</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">ap</span> <span class="pre">=</span> <span class="pre">0.02</span></code> Afterpulsing probability</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">trise</span> <span class="pre">=</span> <span class="pre">1</span></code> Rising time of the signal in ns</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">tfall</span> <span class="pre">=</span> <span class="pre">50</span></code> Falling time of the signal in ns</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">cellrecovery</span> <span class="pre">=</span> <span class="pre">20</span></code> Recovery time of the single SiPM cell in ns</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">tauapfast</span> <span class="pre">=</span> <span class="pre">15</span></code> Time constant of afterpulses delay in ns (fast component)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">tauapslow</span> <span class="pre">=</span> <span class="pre">85</span></code> Time constant of afterpulses delay in ns (slow component)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">ccgv</span> <span class="pre">=</span> <span class="pre">0.05</span></code> Cell to cell gain variation (sigma)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">SNR</span> <span class="pre">=</span> <span class="pre">30</span></code> Signal to noise ratio</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">basespread</span> <span class="pre">=</span> <span class="pre">0</span></code> Spread of the baseline of the signal (sigma)</p></li>
</ul>
</li>
<li><p>Signal analysis settings:</p>
<ul>
<li><p><code class="code docutils literal notranslate"><span class="pre">siglen</span> <span class="pre">=</span> <span class="pre">500</span></code> Total length of the signal in ns</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">sampling</span> <span class="pre">=</span> <span class="pre">0.1</span></code> Samlping time in ns (1 = 1ns, 0.1 = 100ps)</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">intstart</span> <span class="pre">=</span> <span class="pre">20</span></code> Start of the integration gate in ns</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">intgate</span> <span class="pre">=</span> <span class="pre">300</span></code> Length of the integration gate in ns</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">pregate</span> <span class="pre">=</span> <span class="pre">20</span></code> Length of the pregate</p></li>
</ul>
</li>
<li><p>Simulation settings:</p>
<ul>
<li><p><code class="code docutils literal notranslate"><span class="pre">fastDCR</span> <span class="pre">=</span> <span class="pre">False</span></code> Enables faster generation of dark count events</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">fastXT</span> <span class="pre">=</span> <span class="pre">False</span></code>  Enable faster generation of crosstalk events</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">fastSIG</span> <span class="pre">=</span> <span class="pre">True</span></code>  Enables faster computation of signals</p></li>
</ul>
</li>
</ul>
<p>For a more detailed description of each variable see …</p>
</div>
</div>
<div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="libs-lib-py">
<h3>libs/lib.py<a class="headerlink" href="#libs-lib-py" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">This file contains all the functions that are used to generate the event and the SiPM signal.</div>
<div class="line">Here is a brief description of all the functions with their signature.</div>
</div>
<dl class="py function">
<dt id="libs.lib.addDCR">
<code class="sig-prename descclassname">libs.lib.</code><code class="sig-name descname">addDCR</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">rate</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/libs/lib.html#addDCR"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#libs.lib.addDCR" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that generates times of dcr events.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>rate</strong> (<em>double</em>) – Rate of dcr in kHz</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>dcrTime</strong> – Array containing dcr times</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="libs.lib.evtsGen">
<code class="sig-prename descclassname">libs.lib.</code><code class="sig-name descname">evtsGen</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">time</span></em>, <em class="sig-param"><span class="n">xt</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/libs/lib.html#evtsGen"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#libs.lib.evtsGen" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that calculates signal height for each SiPM cell and adds optical crosstalk events.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>time</strong> (<em>np.ndarray</em>) – Array containing the time at which SiPM cells are fired</p></li>
<li><p><strong>xt</strong> (<em>double</em>) – Value of optical crosstalk probability</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>evtTimes</strong> (<em>np.ndarray(int32)</em>) – Array containing the time at wich SiPM cells are fired, including xt events (sorted)</p></li>
<li><p><strong>sigH</strong> (<em>np.ndarray(float32)</em>) – Array containing the pulse height of each fired SiPM cell</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="libs.lib.signalGen">
<code class="sig-prename descclassname">libs.lib.</code><code class="sig-name descname">signalGen</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">times</span></em>, <em class="sig-param"><span class="n">sigH</span></em>, <em class="sig-param"><span class="n">SNR</span></em>, <em class="sig-param"><span class="n">basespread</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/libs/lib.html#signalGen"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#libs.lib.signalGen" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that passes signal height and times to the main function that generates single signals. Also adds noise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>times</strong> (<em>np.ndarray</em><em>(</em><em>int32</em><em>)</em>) – Array containing the time at wich SiPM cells are fired, including xt events (sorted)</p></li>
<li><p><strong>sigH</strong> (<em>np.ndarray</em><em>(</em><em>float32</em><em>)</em>) – Array containing the pulse height of each fired SiPM cell</p></li>
<li><p><strong>SNR</strong> (<em>double</em>) – The signal to noise ratio of the noise to add</p></li>
<li><p><strong>basespread</strong> (<em>double</em>) – Sigma of the value to add as baseline</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>signal</strong> – Array containing the generated SiPM signal</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="libs.lib.PulseCPU">
<code class="sig-prename descclassname">libs.lib.</code><code class="sig-name descname">PulseCPU</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">t</span></em>, <em class="sig-param"><span class="n">h</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/libs/lib.html#PulseCPU"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#libs.lib.PulseCPU" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that generates the signal from a single SiPM cell. This is the “fast” version that uses a pre-computed signal shape and translates it in time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>t</strong> (<em>int32</em>) – Time at which the cell is triggered</p></li>
<li><p><strong>h</strong> (<em>float32</em>) – The relative pulse height of the cell signal</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>s</strong> – Array containing the generated cell signal</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="libs.lib.sigPlot">
<code class="sig-prename descclassname">libs.lib.</code><code class="sig-name descname">sigPlot</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">signal</span></em>, <em class="sig-param"><span class="n">sigTimes</span></em>, <em class="sig-param"><span class="n">dcrTime</span></em>, <em class="sig-param"><span class="n">dev</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/libs/lib.html#sigPlot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#libs.lib.sigPlot" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that plots each signal pulse produced in the simulation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>signal</strong> (<em>np.ndarray</em>) – Array containing the generated SiPM signal</p></li>
<li><p><strong>sigTimes</strong> (<em>np.ndarray</em>) – Array containing all photons events times (including xt)</p></li>
<li><p><strong>dcrTime</strong> (<em>np.ndarray</em>) – Array containing dcr events times</p></li>
<li><p><strong>dev</strong> (<em>str</em>) – String that describes the device on which the signal is computed</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="libs.lib.initializeRandomPool">
<code class="sig-prename descclassname">libs.lib.</code><code class="sig-name descname">initializeRandomPool</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/libs/lib.html#initializeRandomPool"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#libs.lib.initializeRandomPool" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that initializes random seeds for each worker in the multiprocessing Pool</p>
</dd></dl>

<dl class="py function">
<dt id="libs.lib.somestats">
<code class="sig-prename descclassname">libs.lib.</code><code class="sig-name descname">somestats</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">output</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/libs/lib.html#somestats"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#libs.lib.somestats" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that displays histograms of generated events</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>output</strong> (<em>np.ndarray</em>) – Array containing output of the simulation. This array contains the integral, peak and starting time in the first three columns.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See docs for a detailed description of integral, peak and tstart</p>
</div>
</dd></dl>

</div>
<div class="section" id="libs-libcpu-py">
<h3>libs/libCPU.py<a class="headerlink" href="#libs-libcpu-py" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">This file contains the functions used to compute the SiPM signal using the CPU.</div>
<div class="line">Here is a brief description of all the functions with their signature.</div>
</div>
<dl class="py function">
<dt id="libs.libCPU.signalGen">
<code class="sig-prename descclassname">libs.libCPU.</code><code class="sig-name descname">signalGen</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">times</span></em>, <em class="sig-param"><span class="n">sigH</span></em>, <em class="sig-param"><span class="n">SNR</span></em>, <em class="sig-param"><span class="n">basespread</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/libs/libCPU.html#signalGen"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#libs.libCPU.signalGen" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that passes signal height and times to the main function that generates single signals. Also adds noise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>times</strong> (<em>np.ndarray</em><em>(</em><em>int32</em><em>)</em>) – Array containing the time at wich SiPM cells are fired, including xt events (sorted)</p></li>
<li><p><strong>sigH</strong> (<em>np.ndarray</em><em>(</em><em>float32</em><em>)</em>) – Array containing the pulse height of each fired SiPM cell</p></li>
<li><p><strong>SNR</strong> (<em>double</em>) – The signal to noise ratio of the noise to add</p></li>
<li><p><strong>basespread</strong> (<em>double</em>) – Sigma of the value to add as baseline</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>signal</strong> – Array containing the generated SiPM signal</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="libs.libCPU.PulseCPU">
<code class="sig-prename descclassname">libs.libCPU.</code><code class="sig-name descname">PulseCPU</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">t</span></em>, <em class="sig-param"><span class="n">h</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/libs/libCPU.html#PulseCPU"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#libs.libCPU.PulseCPU" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that generates the signal from a single SiPM cell. This is the “full” version that computes the signal shape on CPU</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>t</strong> (<em>int32</em>) – Time at which the cell is triggered</p></li>
<li><p><strong>h</strong> (<em>float32</em>) – The relative pulse height of the cell signal</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>s</strong> – Array containing the generated cell signal</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="libs-libgpu-py">
<h3>libs/libGPU.py<a class="headerlink" href="#libs-libgpu-py" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">This file contains the functions used to compute the SiPM signal using the GPU.</div>
<div class="line">Here is a brief description of all the functions with their signature.</div>
</div>
<dl class="py function">
<dt id="libs.libGPU.signalGen">
<code class="sig-prename descclassname">libs.libGPU.</code><code class="sig-name descname">signalGen</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">times</span></em>, <em class="sig-param"><span class="n">sigH</span></em>, <em class="sig-param"><span class="n">SNR</span></em>, <em class="sig-param"><span class="n">basespread</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/libs/libGPU.html#signalGen"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#libs.libGPU.signalGen" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that passes signal height and times to the main function that generates signals. Also adds noise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>times</strong> (<em>np.ndarray</em><em>(</em><em>int32</em><em>)</em>) – Array containing the time at wich SiPM cells are fired, including xt events (sorted)</p></li>
<li><p><strong>sigH</strong> (<em>np.ndarray</em><em>(</em><em>float32</em><em>)</em>) – Array containing the pulse height of each fired SiPM cell</p></li>
<li><p><strong>SNR</strong> (<em>double</em>) – The signal to noise ratio of the noise to add</p></li>
<li><p><strong>basespread</strong> (<em>double</em>) – Sigma of the value to add as baseline</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>signal</strong> – Array containing the generated SiPM signal</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="libs.libGPU.PulseCPU">
<code class="sig-prename descclassname">libs.libGPU.</code><code class="sig-name descname">PulseCPU</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">t</span></em>, <em class="sig-param"><span class="n">h</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/libs/libGPU.html#PulseCPU"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#libs.libGPU.PulseCPU" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that generates the signal from a single SiPM cell. This is the “full” version that computes the signal shape on CPU</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>t</strong> (<em>int32</em>) – Time at which the cell is triggered</p></li>
<li><p><strong>h</strong> (<em>float32</em>) – The relative pulse height of the cell signal</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>s</strong> – Array containing the generated cell signal</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="libs.libGPU.PulseGPU">
<code class="sig-prename descclassname">libs.libGPU.</code><code class="sig-name descname">PulseGPU</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">t</span></em>, <em class="sig-param"><span class="n">h</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/libs/libGPU.html#PulseGPU"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#libs.libGPU.PulseGPU" title="Permalink to this definition">¶</a></dt>
<dd><p>PulseCPU(t,h)</p>
<p>Function that generates the signal from all SiPM cells at once. This is the “full” version that computes the signal shape on GPU</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>t</strong> (<em>np.ndarray</em><em>(</em><em>int32</em><em>)</em>) – Array containing times at which each the cell is triggered</p></li>
<li><p><strong>h</strong> (<em>np.ndarray</em><em>(</em><em>float32</em><em>)</em>) – Array containing the relative pulse height of each cell signal</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>s</strong> – Array containing the generated SiPM signal</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="other">
<h2>Other<a class="headerlink" href="#other" title="Permalink to this headline">¶</a></h2>
<div class="section" id="scr">
<h3>scr<a class="headerlink" href="#scr" title="Permalink to this headline">¶</a></h3>
<p>This folder contains the source file of the FORTRAN functions that are used to speed-up the simulation</p>
</div>
<div class="section" id="files">
<h3>files<a class="headerlink" href="#files" title="Permalink to this headline">¶</a></h3>
<p>This folder contains some files used by the simulation and contains pre-configurations of some SiPM models that can be eventually loaded.
For an explanation on how to write and load an external configuration file see …</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="setup.html" class="btn btn-neutral float-right" title="Setup" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installation.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Edoardo Proserpio

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>